# awstats-config

Generate sensible awstats configurations for many domains at once.

## To use

Create a `config.rb` script with contents like this:

```rb
domains = [
  "domain1.com",
  "domain2.com",
]

require_relative 'awstats-config/awstats-config'
awstats_config(domains, "/var/www/awstats.domain1.com")
```

When you then run `ruby config.rb`, it will create:

* Lots of `awstats.<domain>.conf` with the domains specified, so that you can use it with `/usr/lib/cgi-bin/awstats.pl` and `/usr/share/awstats/tools/awstats_buildstaticpages.pl`
* An `update_all.sh` which runs all of these steps for each domain, e.g.:

```bash
# Generated by generate-config.rb, do not modify

cp /etc/awstats/index.html /var/www/awstats.domain1.com/index.html
/usr/lib/cgi-bin/awstats.pl -config=domain1.com -update
/usr/share/awstats/tools/awstats_buildstaticpages.pl -config=domain1.com -dir=/var/www/awstats.domain1.com/ -awstatsprog=/usr/lib/cgi-bin/awstats.pl -showcorrupted

/usr/lib/cgi-bin/awstats.pl -config=domain2.com -update
/usr/share/awstats/tools/awstats_buildstaticpages.pl -config=domain2.com -dir=/var/www/awstats.domain1.com/ -awstatsprog=/usr/lib/cgi-bin/awstats.pl -showcorrupted
```

* An `index.html` in `/var/www/awstats.domain1.com`, e.g.:

```html
<html><h1>awstats</h1><ul>
<li><a href="awstats.domain1.com.html">domain1.com</a></li>
<li><a href="awstats.domain2.com.html">domain2.com</a></li>
</ul></html>
```
